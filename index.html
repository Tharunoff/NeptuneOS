<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeptuneOS | Geospatial Subsea Simulation</title>
    <!-- Modern Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <!-- Animation Lib -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <!-- 3D Engine -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- 3D Simulation View directly loaded -->
    <div id="simulation-view">
        <div id="canvas-container"></div>

        <div id="ui-layer">
            <!-- Header -->
            <header class="top-bar">
                <div class="logo">
                    <span class="brand">NeptuneOS</span>
                    <span class="version">v3.0 [GEOSPATIAL CORRIDOR]</span>
                </div>
                <div class="system-status" id="sys-status">SYS: NOMINAL <span class="indicator"></span></div>
            </header>

            <!-- Navigation Panel (Left) -->
            <aside class="panel left-panel">
                <div class="panel-header">NAVIGATION MODES</div>
                <div class="nav-controls">
                    <button id="nav-global" class="btn active-nav">
                        <span class="btn-icon">üåê</span> GLOBAL CURVATURE
                    </button>
                    <button id="nav-sector" class="btn">
                        <span class="btn-icon">üó∫Ô∏è</span> SECTOR OVERVIEW
                    </button>
                    <button id="nav-inspection" class="btn">
                        <span class="btn-icon">üîé</span> SEABED INSPECTION
                    </button>
                </div>

                <div class="sector-readout" style="margin-top: 2rem;">
                    <div class="metric">
                        <div class="metric-label">CURRENT FOCUS</div>
                        <div class="metric-value highlight-text" id="val-sector">GLOBAL</div>
                    </div>
                </div>
            </aside>

            <!-- Layers Panel (Right) -->
            <aside class="panel right-panel">
                <div class="panel-header element-flex">
                    <span>LAYER CONTROLS</span>
                    <span class="live-badge">SYNCED</span>
                </div>

                <div class="layer-list">
                    <label class="layer-toggle">
                        <input type="checkbox" id="layer-gas" checked>
                        <span class="toggle-box"></span>
                        <span class="layer-name">Gas Pipelines (A/B)</span>
                    </label>
                    <label class="layer-toggle">
                        <input type="checkbox" id="layer-crude" checked>
                        <span class="toggle-box"></span>
                        <span class="layer-name">Crude Oil Pipeline</span>
                    </label>
                    <label class="layer-toggle">
                        <input type="checkbox" id="layer-power" checked>
                        <span class="toggle-box"></span>
                        <span class="layer-name">HV Power Cable</span>
                    </label>
                    <label class="layer-toggle">
                        <input type="checkbox" id="layer-fiber" checked>
                        <span class="toggle-box"></span>
                        <span class="layer-name">Fiber Optic Cable</span>
                    </label>

                    <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 10px 0;"></div>

                    <label class="layer-toggle">
                        <input type="checkbox" id="layer-sectors" checked>
                        <span class="toggle-box"></span>
                        <span class="layer-name">Sector Boundaries</span>
                    </label>
                    <label class="layer-toggle">
                        <input type="checkbox" id="layer-bathymetry" checked>
                        <span class="toggle-box"></span>
                        <span class="layer-name">Bathymetry Terrain</span>
                    </label>
                    <label class="layer-toggle">
                        <input type="checkbox" id="layer-stations" checked>
                        <span class="toggle-box"></span>
                        <span class="layer-name">Resident Stations</span>
                    </label>
                    <label class="layer-toggle">
                        <input type="checkbox" id="layer-kp" checked>
                        <span class="toggle-box"></span>
                        <span class="layer-name">KP Markers (50km)</span>
                    </label>

                    <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 10px 0;"></div>

                    <label class="layer-toggle"
                        style="background: rgba(255,100,0,0.1); border: 1px solid rgba(255,100,0,0.3);">
                        <input type="checkbox" id="mode-debug">
                        <span class="toggle-box" style="border-color: orange;"></span>
                        <span class="layer-name" style="color: orange; font-weight: bold;">VISUAL DEBUG MODE</span>
                    </label>
                </div>
            </aside> <!-- Hazard Injection Panel (Bottom Left) -->
            <aside class="panel hazard-panel">
                <div class="panel-header warning-text element-flex">
                    <span>HAZARD ENGINE</span>
                    <span class="live-badge"
                        style="border-color: var(--color-warning); color: var(--color-warning);">PHASE 3</span>
                </div>

                <div class="hazard-controls">
                    <div class="input-group">
                        <label>ASSET TARGET</label>
                        <select id="hz-asset" class="neptune-select">
                            <option value="gas_a">Gas Pipeline A</option>
                            <option value="gas_b">Gas Pipeline B</option>
                            <option value="crude">Crude Oil Pipeline</option>
                            <option value="power">HV Power Cable</option>
                            <option value="fiber">Fiber Optic Cable</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>KP LOCATION (0-1900)</label>
                        <input type="number" id="hz-kp" class="neptune-input" min="0" max="1900" value="750">
                    </div>

                    <div class="input-group">
                        <label>HAZARD TYPE</label>
                        <select id="hz-type" class="neptune-select warning-text">
                            <option value="anchor_drag">Anchor Drag Impact</option>
                            <option value="corrosion">Corrosion Breach</option>
                            <option value="gas_leak">Gas Micro-Leak</option>
                            <option value="crude_rupture">Crude Oil Rupture</option>
                            <option value="fiber_att">Fiber Signal Attenuation</option>
                            <option value="landslide">Seabed Landslide</option>
                            <option value="turbine_crack">Turbine Structure Crack</option>
                            <option value="marine_collision">Marine Animal Collision</option>
                            <option value="seismic">Seismic Micro-Tremor</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>SEVERITY</label>
                        <select id="hz-severity" class="neptune-select">
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high" class="warning-text">High</option>
                            <option value="critical" class="critical-text">Critical</option>
                        </select>
                    </div>

                    <button id="btn-inject" class="btn warning-btn"
                        style="width: 100%; justify-content: center; margin-top: 0.5rem;">
                        ‚ö° INJECT ANOMALY
                    </button>
                </div>
            </aside>

            <!-- Bottom Panel (Asset Details) -->
            <footer class="panel bottom-panel">
                <div class="panel-header">CORRIDOR TELEMETRY</div>
                <div class="telemetry-grid">
                    <div class="metric">
                        <div class="metric-label">START NODE</div>
                        <div class="metric-value">MUNDRA [KP 0]</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">END NODE</div>
                        <div class="metric-value">FUJAIRAH [KP 1900]</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">MAX DEPTH</div>
                        <div class="metric-value warning-text">-4200 m (Sector B)</div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <!-- UI Overlay for 2D Canvas Text labels (KP Markers, Stations) -->
    <div id="annotations-layer"
        style="position: absolute; top: 0; left: 0; pointer-events: none; z-index: 5; width:100%; height:100%; overflow:hidden;">
    </div>

    <!-- Digital Twin Hover Tooltip -->
    <div id="debug-tooltip" class="debug-tooltip hidden">
        <div class="debug-header" id="debug-asset-name">ASSET ID</div>
        <div class="debug-metric"><span>KP:</span> <span id="debug-kp">--</span></div>
        <div class="debug-metric"><span>Coordinates:</span> <span id="debug-coords">--</span></div>
        <div class="debug-metric"><span>Depth:</span> <span id="debug-depth">--</span></div>
        <div class="debug-metric"><span>Sector:</span> <span id="debug-sector">--</span></div>
        <div class="debug-divider"></div>
        <div class="debug-metric"><span>Health State:</span> <span id="debug-health" class="nominal-text">NORMAL</span>
        </div>
        <div class="debug-metric"><span>Uncertainty:</span> <span id="debug-uncertainty">0.00</span></div>
    </div>

    <script src="script.js"></script>
</body>

</html>